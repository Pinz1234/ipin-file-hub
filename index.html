<!doctype html>
<html lang="id" data-theme="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>IPIN FILE HUB</title>
  <meta name="description" content="IPIN FILE HUB â€“ Koleksi script gratis.">
  <meta name="theme-color" content="#0b0e14">

  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
</head>

<body>

<!-- BACKGROUND -->
<div class="bg">
  <span class="blob b1"></span>
  <span class="blob b2"></span>
  <span class="blob b3"></span>
</div>

<!-- TOPBAR -->
<header class="topbar">
  <div class="topbar-inner">
    <div class="brand-mini">IPIN FILE HUB</div>

    <button class="theme-toggle" id="themeBtn">
      <span id="themeText">Dark</span>
      <span class="switch"><span class="knob"></span></span>
    </button>
  </div>
</header>

<!-- CONTENT -->
<main class="wrap">

  <!-- HERO -->
  <section class="hero reveal">
    <h1 class="hero-title">IPIN SCRIPT</h1>
    <p class="hero-subtitle">
      Kumpulan script gratis. Klik detail sebelum download.
    </p>

    <div class="hero-actions">
      <a class="join click" href="https://chat.whatsapp.com/LvA30WKiFgB0t5yFjFmWsz?mode=hqrc" target="_blank">Grup WA</a>
      <a class="join click" href="https://whatsapp.com/channel/0029VbBKScNAInPfll7NHM0O" target="_blank">Channel WA</a>
      <a class="join click" href="https://t.me/IPINSHOP" target="_blank">Telegram</a>
      <a class="join click" href="https://youtube.com/@PinshopCik" target="_blank">YouTube</a>
    </div>
  </section>

  <!-- PANEL -->
  <section class="panel reveal">
    <input id="search" class="search" placeholder="Cari script...">
    <div id="list" class="grid"></div>
    <div id="empty" class="empty">Tidak ada data.</div>
  </section>

</main>

<!-- MODAL DETAIL -->
<div class="overlay" id="modal">
  <div class="modal">
    <h3 id="mName"></h3>
    <p id="mDesc"></p>

    <div class="hero-actions">
      <a id="mDownload" class="join click" target="_blank">Download</a>
      <a class="join click" href="https://t.me/IPINSHOP" target="_blank">Telegram</a>
    </div>

    <div style="margin-top:16px;text-align:center">
      <button class="join click" id="closeModal">Tutup</button>
    </div>
  </div>
</div>

<!-- POPUP -->
<div class="overlay" id="popup">
  <div class="modal">
    <h3>Gabung Komunitas</h3>
    <p>Dapatkan update script terbaru.</p>

    <div class="hero-actions">
      <a class="join click" href="https://chat.whatsapp.com/LvA30WKiFgB0t5yFjFmWsz?mode=hqrc" target="_blank">Grup WA</a>
      <a class="join click" href="https://t.me/IPINSHOP" target="_blank">Telegram</a>
    </div>

    <div style="margin-top:16px;text-align:center">
      <button class="join click" id="closePopup">Tutup</button>
    </div>
  </div>
</div>

<!-- DATA -->
<script src="data.js"></script>

<!-- SCRIPT -->
<script>
/* ===============================
   CLICK SOUND
=============================== */
const clickSound = new Audio("click.mp3");
clickSound.volume = 0.06;

document.addEventListener("click", e => {
  if (e.target.closest(".click")) {
    clickSound.currentTime = 0;
    clickSound.play().catch(()=>{});
  }
});

/* ===============================
   THEME TOGGLE
=============================== */
const root = document.documentElement;
const themeBtn = document.getElementById("themeBtn");
const themeText = document.getElementById("themeText");

const savedTheme = localStorage.getItem("theme") || "dark";
root.setAttribute("data-theme", savedTheme);
themeText.textContent = savedTheme === "dark" ? "Dark" : "Light";

themeBtn.onclick = () => {
  const next = root.getAttribute("data-theme") === "dark" ? "light" : "dark";
  root.setAttribute("data-theme", next);
  localStorage.setItem("theme", next);
  themeText.textContent = next === "dark" ? "Dark" : "Light";
};

/* ===============================
   RENDER DATA
=============================== */
const list = document.getElementById("list");
const empty = document.getElementById("empty");
const search = document.getElementById("search");

function render(filter="") {
  list.innerHTML = "";
  const f = filter.toLowerCase();

  const items = window.scripts.filter(s =>
    s.name.toLowerCase().includes(f)
  );

  empty.style.display = items.length ? "none" : "block";

  items.forEach(s => {
    const card = document.createElement("div");
    card.className = "card reveal";

    card.innerHTML = `
      <h3>${s.name}</h3>
      <p>${s.desc}</p>
      <button class="join click">Detail</button>
    `;

    card.querySelector("button").onclick = () => openModal(s);
    list.appendChild(card);
  });

  reveal();
}

search.oninput = () => render(search.value);

/* ===============================
   MODAL
=============================== */
const modal = document.getElementById("modal");
const mName = document.getElementById("mName");
const mDesc = document.getElementById("mDesc");
const mDownload = document.getElementById("mDownload");

function openModal(s) {
  mName.textContent = s.name;
  mDesc.textContent = s.desc;
  mDownload.href = s.link;
  modal.classList.add("show");
}

document.getElementById("closeModal").onclick = () =>
  modal.classList.remove("show");

/* ===============================
   POPUP (ONCE)
=============================== */
const popup = document.getElementById("popup");

if (!sessionStorage.getItem("popupShown")) {
  sessionStorage.setItem("popupShown", "yes");
  setTimeout(() => popup.classList.add("show"), 1200);
}

document.getElementById("closePopup").onclick = () =>
  popup.classList.remove("show");

/* ===============================
   REVEAL
=============================== */
function reveal() {
  document.querySelectorAll(".reveal").forEach(el => {
    el.classList.add("in");
  });
}

/* INIT */
render();
</script>

</body>
</html>