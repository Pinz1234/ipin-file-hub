<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>IPIN FILE HUB</title>
  <meta name="description" content="IPIN FILE HUB – Koleksi file bot dan tools.">
  <meta name="theme-color" content="#0b0e14">

  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
</head>

<body>
  <div class="bg">
    <span class="blob b1"></span>
    <span class="blob b2"></span>
    <span class="blob b3"></span>
  </div>

  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand-mini">IPIN FILE HUB</div>

      <button class="theme-toggle" id="themeBtn">
        <span id="themeLabel">Dark</span>
        <span class="switch"><span class="knob"></span></span>
      </button>
    </div>
  </header>

  <main class="wrap">
    <section class="hero reveal">
      <div class="hero-badge">Repository</div>
      <h1 class="hero-title">IPIN SCRIPT</h1>
      <p class="hero-subtitle">
        Koleksi file bot dan tools. Cari, lihat detail, lalu unduh.
      </p>

      <div class="hero-actions">
        <a class="join" href="https://chat.whatsapp.com/LvA30WKiFgB0t5yFjFmWsz?mode=hqrc" target="_blank">Grup WhatsApp</a>
        <a class="join" href="https://whatsapp.com/channel/0029VbBKScNAInPfll7NHM0O" target="_blank">Channel WhatsApp</a>
        <a class="join" href="https://t.me/IPINSHOP" target="_blank">Telegram</a>
        <a class="join" href="https://youtube.com/@PinshopCik" target="_blank">YouTube</a>
      </div>

      <div class="hero-stats">
        <div class="stat">
          <div class="stat-num" id="totalDl">0</div>
          <div class="stat-label">Total download (device)</div>
        </div>
        <div class="stat">
          <div class="stat-num" id="totalFiles">0</div>
          <div class="stat-label">Total file</div>
        </div>
      </div>
    </section>

    <section class="panel reveal">
      <input id="q" class="search" placeholder="Cari file..." />
      <div id="list" class="grid"></div>
      <div id="empty" class="empty">Tidak ada hasil.</div>
    </section>

    <footer class="footer">© IPIN FILE HUB</footer>
  </main>

  <!-- MODAL -->
  <div class="overlay" id="overlay">
    <div class="modal">
      <div class="modal-top">
        <b id="mTitle">Detail</b>
        <button id="mClose">✕</button>
      </div>

      <p id="mDesc"></p>

      <div class="modal-actions">
        <a id="mTelegram" class="btn ghost" target="_blank">Telegram</a>
        <a id="mDownload" class="btn primary" target="_blank">Download</a>
      </div>
    </div>
  </div>

  <script src="data.js"></script>
  <script>
    /* THEME */
    const root = document.documentElement;
    const btn = document.getElementById("themeBtn");
    const lbl = document.getElementById("themeLabel");
    const saved = localStorage.getItem("theme") || "dark";
    root.setAttribute("data-theme", saved);
    lbl.textContent = saved === "dark" ? "Dark" : "Light";

    btn.onclick = () => {
      const next = root.getAttribute("data-theme") === "dark" ? "light" : "dark";
      root.setAttribute("data-theme", next);
      localStorage.setItem("theme", next);
      lbl.textContent = next === "dark" ? "Dark" : "Light";
    };

    /* COUNTER */
    const totalDl = document.getElementById("totalDl");
    const totalFiles = document.getElementById("totalFiles");
    totalDl.textContent = localStorage.getItem("total") || 0;

    function incTotal() {
      let n = Number(localStorage.getItem("total") || 0) + 1;
      localStorage.setItem("total", n);
      totalDl.textContent = n;
    }

    /* MODAL */
    const overlay = document.getElementById("overlay");
    const mClose = document.getElementById("mClose");
    const mTitle = document.getElementById("mTitle");
    const mDesc = document.getElementById("mDesc");
    const mDownload = document.getElementById("mDownload");
    const mTelegram = document.getElementById("mTelegram");

    mClose.onclick = () => overlay.classList.remove("show");
    overlay.onclick = e => e.target === overlay && overlay.classList.remove("show");

    /* RENDER */
    const list = document.getElementById("list");
    const empty = document.getElementById("empty");
    const q = document.getElementById("q");

    function render(filter="") {
      list.innerHTML = "";
      const f = filter.toLowerCase();
      const data = window.scripts || [];
      totalFiles.textContent = data.length;

      const items = data.filter(x =>
        (x.name + x.desc).toLowerCase().includes(f)
      );

      empty.style.display = items.length ? "none" : "block";

      items.forEach(sc => {
        const card = document.createElement("div");
        card.className = "card reveal";
        card.innerHTML = `
          <h3>${sc.name}</h3>
          <p>${sc.desc}</p>
          <div class="card-bottom">
            <button class="btn primary">Download</button>
            <button class="btn ghost">Detail</button>
          </div>
        `;

        card.querySelector(".primary").onclick = () => {
          incTotal();
          window.open(sc.link, "_blank");
        };

        card.querySelector(".ghost").onclick = () => {
          mTitle.textContent = sc.name;
          mDesc.textContent = sc.desc;
          mDownload.href = sc.link;
          mTelegram.href = "https://t.me/IPINSHOP";
          overlay.classList.add("show");
        };

        list.appendChild(card);
      });
    }

    q.oninput = () => render(q.value);
    render();

    requestAnimationFrame(() =>
      document.querySelectorAll(".reveal").forEach(e => e.classList.add("in"))
    );
  </script>
</body>
</html>